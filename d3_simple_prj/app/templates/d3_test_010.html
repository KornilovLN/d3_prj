<!-- app/templates/d3_test_010.html -->
{% extends "base.html" %}

{% block title %}D3 Test - Text 2{% endblock %}

{% block content %}
<div id="d3-container">
    <h2 class="custom-sidebar">Text Example 2</h2>
    <svg width="1200" height="800" style="border: 1px solid #ccc;"></svg>
</div>

<script>
    // Example D3.js code to render text
    const svg = d3.select("svg");

    // Create a group for the first text
    const group1 = svg.append("g")
        .attr("id", "group1");

    // Add the first text to group1
    group1.append("text")
        .attr("x", 600)          // X position of the text
        .attr("y", 100)          // Y position of the text
        .attr("text-anchor", "middle") // Align text to the middle
        .style("font-size", "72px")    // Font size
        .style("font-family", "Arial, sans-serif") // Font family
        .style("fill", "yellow")        // Text color
        .style("stroke", "red")
        .style("stroke-width", 1)
        .text("Hello, SVG!");   // Text content

    // Create a group for the second text with shadow
    const group2 = svg.append("g")
        .attr("id", "group2");

    // Define a filter for the drop shadow
    const defs = group2.append("defs");

    const filter = defs.append("filter")
        .attr("id", "drop-shadow")
        .attr("height", "130%");

    filter.append("feGaussianBlur")
        .attr("in", "SourceAlpha")
        .attr("stdDeviation", 5) // Adjust the blur level
        .attr("result", "blur");

    filter.append("feOffset")
        .attr("in", "blur")
        .attr("dx", 4) // Horizontal offset
        .attr("dy", 4) // Vertical offset
        .attr("result", "offsetBlur");

    const feMerge = filter.append("feMerge");

    feMerge.append("feMergeNode")
        .attr("in", "offsetBlur");
    feMerge.append("feMergeNode")
        .attr("in", "SourceGraphic");

    // Add text with the drop shadow filter applied to group2
    group2.append("text")
        .attr("x", 600)
        .attr("y", 250)
        .attr("text-anchor", "middle")
        .style("font-size", "96px")
        .style("font-family", "Times New Roman, serif") // Different font family
        .style("fill", "lightgreen")
        .style("stroke", "blue")
        .style("stroke-width", 1)
        .style("filter", "url(#drop-shadow)") // Apply the drop shadow filter
        .text("Hello, SVG with Shadow!");
</script>
{% endblock %}
